---
import ContactUs from "src/components/ContactUs.astro";
import { css, cx } from "../../styled-system/css";
import Layout from "../layouts/Layout.astro";
import { actions } from "astro:actions";

import BentoCard from "../components/ui/BentoCard.astro";

const linkItem = [
  { href: "/", label: "Work" },
  { href: "/", label: "Blog" },
  { href: "/", label: "Skill" },
];
const skillsList = [
  "HTML",
  "CSS",
  "JavaScript(ES6)",
  "TypeScript",
  "PHP",
  "Node.js",
  "React",
  "Next.js",
];
const result = Astro.getActionResult(actions.formAction);

let submittedData = { name: "", email: "", message: "" };

if (Astro.request.method === "POST") {
  try {
    const formData = await Astro.request.formData();
    submittedData = {
      name: (formData.get("name") as string) || "",
      email: (formData.get("email") as string) || "",
      message: (formData.get("message") as string) || "",
    };
  } catch (error) {}
}

if (result && !result.error) {
  return Astro.redirect("/thanks");
}

const itemHeight = 350;
const row = 3;
const initialGridStyles = {
  display: "grid",
  gridTemplate: `
    "c1 c1 c5 c3" 300px
    "c2 c4 c4 c4" 400px
    "c6 c6 c6 c6"  750px / 1fr 1fr 1fr
  `,
  width: "full",
  height: `calc(${row} * ${itemHeight})`,
  gap: 2,
};
---

<Layout>
  <main
    class={css({
      w: "full",
      h: "full",
      padding: "8",
      display: "grid",
      gridTemplateColumns: "1fr",
      gap: "8",
    })}
  >
    <div class={css(initialGridStyles)}>
      <BentoCard
        title="I'm a WEB DEVELOPER"
        desc="TRHRは、Webサイト/アプリケーション開発を得意としたフリーランスのフロントエンドエンジニアです。"
        href="/"
        className={css({
          gridArea: "c1",
        })}
      >
        <div
          class={css({
            w: 28,
            h: 28,
            backgroundColor: "slate.100",
          })}
        >
          asd;fjk
        </div>
      </BentoCard>
      <BentoCard
        title="BLOG"
        desc="常にフロントエンド領域の最新技術をキャッチアップしています"
        className={css({
          gridArea: "c2",
        })}
      >
        <div
          class={css({
            w: 28,
            h: 28,
            backgroundColor: "slate.100",
          })}
        >
          asd;fjk
        </div>
      </BentoCard>
      <BentoCard
        title="PHILOSOPHY"
        desc="品質とパフォーマンスに拘ります"
        className={css({
          gridArea: "c3",
        })}
      >
        <div
          class={css({
            w: 28,
            h: 28,
            backgroundColor: "slate.100",
          })}
        >
          RELIABILITY
        </div>
      </BentoCard>
      <BentoCard
        title="SKILL LIBRARY"
        desc="スキル一覧のリスト"
        className={css({
          gridArea: "c4",
        })}
      >
        <div
          class={css({
            backgroundColor: "gray.800", // Terminal background color
            color: "green.400", // Terminal text color
            fontFamily: "mono", // Monospace font
            padding: "4",
            borderRadius: "md",
            w: "full",
            maxW: "full",
            h: "auto",
            overflowX: "auto", // For horizontal scrolling if content is too wide
          })}
        >
          <div
            class={css({
              w: "full",
              display: "flex",
              alignItems: "center",
              mb: "2",
            })}
          >
            <span class={css({ color: "blue.400" })}>user@trhr-portfolio</span>
            <span class={css({ color: "white", mx: "1" })}>:</span>
            <span class={css({ color: "purple.400" })}>~/skills</span>
            <span class={css({ color: "white", ml: "1" })}>$</span>
            <span class={css({ color: "white", ml: "2" })}>cat skills.txt</span>
          </div>
          <pre
            class={css({
              margin: "0",
              whiteSpace: "pre-wrap",
              wordBreak: "break-all",
            })}>
						{skillsList.join("\n")}
					</pre>
        </div>
      </BentoCard>
      <BentoCard
        title="WORKS"
        desc="これまでに作成した成果物"
        href="/"
        className={css({
          gridArea: "c5",
        })}
      >
        <div
          class={css({
            w: 28,
            h: 28,
            backgroundColor: "slate.100",
          })}
        >
          aasdf
        </div>
      </BentoCard>
      <BentoCard
        title="CONTACT"
        desc="これまでに作成した成果物"
        className={css({
          gridArea: "c6",
        })}
      >
        <ContactUs result={result} submittedData={submittedData} />
      </BentoCard>
    </div>
  </main>
</Layout>
